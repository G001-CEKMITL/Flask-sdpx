pipeline{
    agent any
    stages{
       stage("test"){
        agent {
            label 'test'
        }
        steps{
            sh 'touch dev.env'
            sh 'echo "MYSQL_DB_USER = admin" >> dev.env'
            sh 'echo "MYSQL_DB_PASSWORD = db4dev$" >> dev.env'
            sh 'echo "MYSQL_DB_DB = Sdpxdb" >> dev.env'
            sh 'echo "MYSQL_DB_HOST = 10.5.0.5/3307" >> dev.env'
            sh 'docker-compose -f docker-compose.yml up -d --build'
        }
        
       }
       stage("build"){
        agent {
            label 'test'
        }
        steps{
            sh 'robot test.robot'
        }
        
       }
       stage("deploy"){
        agent {
            label 'test'
        }
        steps{
            sh 'echo "deploying"'
        }
        
       }
    }
}